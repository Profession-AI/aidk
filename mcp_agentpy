
def callback(content):
    if content["type"] == "text":
        print(content["delta"], end="", flush=True)
    elif content["type"] == "tool_call":
        print(content["tool_call"])


from aidk.models import Model
from aidk.agents import Agent
from aidk.tools.websearch import search_web_with_tavily
from aidk.mcp.mcp_server import McpServer

model = Model(provider="openai", model="gpt-4o-mini")
mcp = McpServer("coingecko", "http", server_url="https://mcp.api.coingecko.com/sse")

agent = Agent(model=model, paradigm="function_calling", tools=[search_web_with_tavily], mcp_servers=[mcp])
agent.enable_streaming(callback)
resp = agent.run("Quali sono le ultime notizie sul bitcoin e qual Ã¨ il valore  attuale?")